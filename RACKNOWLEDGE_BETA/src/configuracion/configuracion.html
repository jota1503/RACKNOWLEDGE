<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../output.css" />
    <link rel="stylesheet" href="./confgs.css" />
    <link
      rel="stylesheet"
      href="https://cdn-uicons.flaticon.com/2.1.0/uicons-bold-rounded/css/uicons-bold-rounded.css"
    />

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>RACKNOWLEDGE</title>
  </head>

  <body class="m-0 h-full overflow-y-scroll py-2">

    <!-- HEADER -->
    <div class="flex justify-center text-center">
      <header
        class="my-4 w-2/3 rounded-xl bg-gradient-to-r from-Light-Blue to-Fucsia p-1.5 text-center text-[#DFE4EBEF] shadow-md"
      >
        <h1 class="text-[26px] font-semibold">Configuracion</h1>
      </header>
    </div>

    <!-- CONFIGS -->
    <div class="flex justify-center text-center dark:text-[#dfe4eb]">
      <div class="w-2/3">
        <section class="rounded-lg bg-[#D6DEE7] p-4 dark:bg-[#3E3F43]">
          <div class="grid grid-cols-2 gap-4">
            <!-- FOTO DE PERFIL -->
            <div class="place-self-center">Foto De Perfil</div>
            <div class="">
              <!-- Campo para cargar una imagen de perfil -->
              <div class="container-input">
                <input
                  type="file"
                  name="file-2"
                  id="file-2"
                  class="inputfile inputfile-2"
                  data-multiple-caption="{count} archivos seleccionados"
                  accept="image/*"
                  multiple
                />
                <label for="file-2">
                  <path
                    d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"
                  ></path>
                  <span class="iborrainputfile">Seleccionar archivo</span>
                </label>
              </div>
              <!--
              <div>
                <button
                  class="button_remove"
                  onclick="removeImageFromLocalStorage()"
                >
                  <i class="fi fi-br-cross"></i>
                </button>
              </div>-->
            </div>
            <!---->
          </div>
        </section>
      </div>
    </div>
  </body>
  <!-- SCRIPTS -->
  <script>
    //El código JavaScript toma la imagen seleccionada por el usuario, la convierte en una URL de datos (data URL) y la asigna como la fuente (src) de la etiqueta de imagen. De esta manera, la imagen seleccionada por el usuario se mostrará en el lugar donde pusiste la imagen de perfil.
    const inputImage = document.getElementById("file-2");
    const imagenPerfil = document.getElementById("imagenPerfil");

    // Función para leer la imagen del localStorage y asignarla a la etiqueta de imagen
    function loadImageFromLocalStorage() {
      const savedImage = localStorage.getItem("imagenPerfil");
      if (savedImage) {
        imagenPerfil.src = savedImage;
      }
    }

    // Función para guardar la imagen en el localStorage
    function saveImageToLocalStorage(imageSrc) {
      localStorage.setItem("imagenPerfil", imageSrc);
    }

    // Función para eliminar la imagen del localStorage
    function removeImageFromLocalStorage() {
      localStorage.removeItem("imagenPerfil");
    }

    // Leer la imagen del localStorage cuando la página se carga
    window.addEventListener("load", loadImageFromLocalStorage);

    // Si se actualiza la imagen, eliminar la imagen del localStorage y actualizarla con la nueva imagen
    inputImage.addEventListener("change", function () {
      const file = this.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (event) {
          const imgSrc = event.target.result;
          imagenPerfil.src = imgSrc;
          saveImageToLocalStorage(imgSrc);
        };
        reader.readAsDataURL(file);
      }
    });
  </script>
</html>
